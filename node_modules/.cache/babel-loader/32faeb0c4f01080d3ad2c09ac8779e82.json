{"ast":null,"code":"import _toConsumableArray from\"E:\\\\github\\\\covid\\\\COVID19_amid_twitter_analysing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:\\\\github\\\\covid\\\\COVID19_amid_twitter_analysing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import'../../node_modules/react-vis/dist/style.css';import{XYPlot,XAxis,YAxis,LineSeries,VerticalBarSeries,RadialChart}from'react-vis';import{searchSuburb,suburbCaseDate,stateCaseDate,suburbName,stateName,searchState,transState,twitterDate}from'../modules/scale';import FormControl from\"@material-ui/core/FormControl\";import InputLabel from\"@material-ui/core/InputLabel\";import Select from\"@material-ui/core/Select\";import MenuItem from\"@material-ui/core/MenuItem\";import Typography from\"@material-ui/core/Typography\";import{Line,Bar}from'react-chartjs-2';import{strFromDate}from'../methods/DateTransfer';export default function Analysis(props){var _useState=useState('suburb'),_useState2=_slicedToArray(_useState,2),scale=_useState2[0],setScale=_useState2[1];var _useState3=useState('ballarat'),_useState4=_slicedToArray(_useState3,2),area=_useState4[0],setArea=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),casesData=_useState6[0],setcasesData=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),casesAxis=_useState8[0],setcasesAxis=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),avgAxis=_useState10[0],setavgAxis=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),avgData=_useState12[0],setavgData=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),barAxis=_useState14[0],setbarAxis=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),barData=_useState16[0],setbarData=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),bar2Axis=_useState18[0],setbar2Axis=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),bar2Data=_useState20[0],setbar2Data=_useState20[1];var _useState21=useState('0513'),_useState22=_slicedToArray(_useState21,2),date=_useState22[0],setDate=_useState22[1];var clearState=function clearState(){casesAxis.length=0;casesData.length=0;barAxis.length=0;barData.length=0;bar2Axis.length=0;bar2Data.length=0;avgData.length=0;};useEffect(function(){});var upload=function upload(name,date){clearState();if(scale==='state'){try{var low=transState.get(name);Object.keys(props.statecases).forEach(function(day){try{var cases=props.statecases[day][name];var avg=props.stateavg[day][low];setavgData(function(avgData){return[].concat(_toConsumableArray(avgData),[avg]);});setcasesAxis(function(casesAxis){return[].concat(_toConsumableArray(casesAxis),[day]);});setcasesData(function(casesData){return[].concat(_toConsumableArray(casesData),[cases]);});}catch(e){}});}catch(e){}try{var topic=props.statetopic[date][low];topic.map(function(t,index){setbarAxis(function(barAxis){return[].concat(_toConsumableArray(barAxis),[t.word]);});setbarData(function(barData){return[].concat(_toConsumableArray(barData),[t.num]);});});}catch(e){}try{var emotion=props.stateemotion[date][low];emotion.map(function(t){setbar2Axis(function(bar2Axis){return[].concat(_toConsumableArray(bar2Axis),[t.emotion]);});setbar2Data(function(bar2Data){return[].concat(_toConsumableArray(bar2Data),[t.num]);});});}catch(e){}}else if(scale==='suburb'){try{var low=name.toLowerCase();Object.keys(props.suburbcases).forEach(function(day){try{var cases=props.suburbcases[day][name];var avg=props.suburbavg[day][low];setavgData(function(avgData){return[].concat(_toConsumableArray(avgData),[avg]);});setcasesAxis(function(casesAxis){return[].concat(_toConsumableArray(casesAxis),[day]);});setcasesData(function(casesData){return[].concat(_toConsumableArray(casesData),[cases]);});}catch(e){}});}catch(e){}try{var topic=props.suburbtopic[date][low];console.log(\"date\"+date+\"wordddd\"+topic[0].word);topic.map(function(t,index){setbarAxis(function(barAxis){return[].concat(_toConsumableArray(barAxis),[t.word]);});setbarData(function(barData){return[].concat(_toConsumableArray(barData),[t.num]);});});}catch(e){}try{var emotion=props.suburbemtion[date][low];emotion.map(function(t){setbar2Axis(function(bar2Axis){return[].concat(_toConsumableArray(bar2Axis),[t.emotion]);});setbar2Data(function(bar2Data){return[].concat(_toConsumableArray(bar2Data),[t.num]);});});}catch(e){}}};var handleScaleChange=function handleScaleChange(event){setScale(event.target.value);};var handleAreaChange=function handleAreaChange(event){setArea(event.target.value);upload(event.target.value,date);};var handleDateChange=function handleDateChange(event){setDate(event.target.value);upload(area,event.target.value);};var timestamp=new Date('April 4 2020').getTime();var ONE_DAY=86400000;return(/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:'140px',marginLeft:'80px'}},/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(\"div\",{style:{width:'600px',height:'200px',marginRight:'200px'}},/*#__PURE__*/React.createElement(Line,{data:{labels:casesAxis,datasets:[{data:casesData,borderColor:'rgba(229, 115, 115, 1)',fill:false,label:'cases',yAxisID:'cases'},{data:avgData,borderColor:'#b39ddb',fill:false,label:'avg',yAxisID:'emotion'}]},onElementsClick:function onElementsClick(elems){try{var activePoint=elems[0];var data=activePoint._chart.data;var datasetIndex=activePoint._datasetIndex;var labels=data.labels;var index=activePoint._index;setDate(labels[index]);upload(area,labels[index]);}catch(e){}},options:{scales:{yAxes:[{id:'cases',type:'linear',position:'left',scaleLabel:{display:false,labelString:'cases'}},{id:'emotion',type:'linear',position:'right',ticks:{max:1,min:-1},scaleLabel:{display:false,labelString:'emotion_avg'}}],xAxes:[{scaleLabel:{display:true,labelString:'Date (M D)'}}]}}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,null,\"Scale\"),/*#__PURE__*/React.createElement(Select,{value:scale,onChange:handleScaleChange},/*#__PURE__*/React.createElement(MenuItem,{value:'suburb'},\"suburb\"),/*#__PURE__*/React.createElement(MenuItem,{value:'state'},\"state\"))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,null,\"Area\"),/*#__PURE__*/React.createElement(Select,{value:area,onChange:handleAreaChange},scale==='state'&&stateName.map(function(key,i){return(/*#__PURE__*/React.createElement(MenuItem,{key:i,value:key},key));}),scale==='suburb'&&suburbName.map(function(key,i){return(/*#__PURE__*/React.createElement(MenuItem,{key:i,value:key},key));}))),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,null,\"Date\"),/*#__PURE__*/React.createElement(Select,{value:date,onChange:handleDateChange},twitterDate.map(function(key){return(/*#__PURE__*/React.createElement(MenuItem,{value:key},key));}))))),/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex',marginTop:'120px'}},/*#__PURE__*/React.createElement(\"div\",{style:{width:'800px',height:'200px'}},/*#__PURE__*/React.createElement(Bar,{data:{labels:barAxis,datasets:[{data:barData,backgroundColor:'#b39ddb',fill:false,label:'twitter topic'}]},options:{scales:{yAxes:[{ticks:{min:0}}]}}})),/*#__PURE__*/React.createElement(\"div\",{style:{width:'600px',height:'200px',marginLeft:'20px'}},/*#__PURE__*/React.createElement(Bar,{data:{labels:bar2Axis,datasets:[{data:bar2Data,backgroundColor:'#b39ddb',fill:false,label:'twitter emotion'}]}}))),/*#__PURE__*/React.createElement(\"br\",null))));}","map":{"version":3,"sources":["E:/github/covid/COVID19_amid_twitter_analysing/src/modules/analysis.jsx"],"names":["React","useState","useEffect","XYPlot","XAxis","YAxis","LineSeries","VerticalBarSeries","RadialChart","searchSuburb","suburbCaseDate","stateCaseDate","suburbName","stateName","searchState","transState","twitterDate","FormControl","InputLabel","Select","MenuItem","Typography","Line","Bar","strFromDate","Analysis","props","scale","setScale","area","setArea","casesData","setcasesData","casesAxis","setcasesAxis","avgAxis","setavgAxis","avgData","setavgData","barAxis","setbarAxis","barData","setbarData","bar2Axis","setbar2Axis","bar2Data","setbar2Data","date","setDate","clearState","length","upload","name","low","get","Object","keys","statecases","forEach","day","cases","avg","stateavg","e","topic","statetopic","map","t","index","word","num","emotion","stateemotion","toLowerCase","suburbcases","suburbavg","suburbtopic","console","log","suburbemtion","handleScaleChange","event","target","value","handleAreaChange","handleDateChange","timestamp","Date","getTime","ONE_DAY","marginTop","marginLeft","display","width","height","marginRight","labels","datasets","data","borderColor","fill","label","yAxisID","elems","activePoint","_chart","datasetIndex","_datasetIndex","_index","scales","yAxes","id","type","position","scaleLabel","labelString","ticks","max","min","xAxes","key","i","backgroundColor"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport '../../node_modules/react-vis/dist/style.css';\r\nimport {XYPlot, XAxis, YAxis, LineSeries, VerticalBarSeries, RadialChart} from 'react-vis';\r\n\r\nimport {\r\n    searchSuburb,\r\n    suburbCaseDate,\r\n    stateCaseDate,\r\n    suburbName,\r\n    stateName,\r\n    searchState,\r\n    transState,\r\n    twitterDate,\r\n} from '../modules/scale'\r\n\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport InputLabel from \"@material-ui/core/InputLabel\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {Line, Bar} from 'react-chartjs-2';\r\n\r\nimport {strFromDate} from '../methods/DateTransfer'\r\n\r\n\r\nexport default function Analysis(props) {\r\n\r\n    const [scale, setScale] = useState('suburb')\r\n    const [area, setArea] = useState('ballarat')\r\n    const [casesData, setcasesData] = useState([])\r\n    const [casesAxis, setcasesAxis] = useState([])\r\n    const [avgAxis, setavgAxis] = useState([])\r\n    const [avgData, setavgData] = useState([])\r\n\r\n\r\n    const [barAxis, setbarAxis] = useState([])\r\n    const [barData, setbarData] = useState([])\r\n\r\n    const [bar2Axis, setbar2Axis] = useState([])\r\n    const [bar2Data, setbar2Data] = useState([])\r\n\r\n\r\n    const [date, setDate] = useState('0513')\r\n\r\n    const clearState = () => {\r\n        casesAxis.length = 0\r\n        casesData.length = 0\r\n        barAxis.length = 0\r\n        barData.length = 0\r\n        bar2Axis.length = 0\r\n        bar2Data.length = 0\r\n        avgData.length=0\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n\r\n    });\r\n\r\n    const upload = (name, date) => {\r\n\r\n        clearState()\r\n\r\n\r\n        if (scale === 'state') {\r\n\r\n            try{\r\n                var low = transState.get(name)\r\n\r\n                Object.keys(props.statecases).forEach\r\n                (\r\n                    day => {\r\n                        try {\r\n                            var cases = props.statecases[day][name]\r\n                            var avg = props.stateavg[day][low]\r\n                            setavgData(avgData => [...avgData, avg]);\r\n                            setcasesAxis(casesAxis => [...casesAxis, day])\r\n                            setcasesData(casesData => [...casesData, cases]);\r\n                        }catch (e) {\r\n\r\n                        }\r\n                    })\r\n\r\n            }catch (e) {\r\n            }\r\n\r\n            try {\r\n\r\n                var topic = props.statetopic[date][low]\r\n\r\n\r\n\r\n                topic.map(\r\n                    (t,index) => {\r\n\r\n                            setbarAxis(barAxis => [...barAxis, t.word])\r\n                            setbarData(barData => [...barData, t.num])\r\n\r\n                    }\r\n                )\r\n            } catch (e) {\r\n            }\r\n\r\n\r\n            try {\r\n                var emotion = props.stateemotion[date][low]\r\n\r\n                emotion.map(\r\n                    (t) => {\r\n                        setbar2Axis(bar2Axis => [...bar2Axis, t.emotion])\r\n                        setbar2Data(bar2Data => [...bar2Data, t.num])\r\n                    }\r\n                )\r\n            } catch (e) {\r\n            }\r\n\r\n\r\n        } else if (scale === 'suburb') {\r\n\r\n\r\n            try {\r\n\r\n                var low = name.toLowerCase()\r\n\r\n                Object.keys(props.suburbcases).forEach\r\n                (\r\n                    day => {\r\n                        try {\r\n                            var cases = props.suburbcases[day][name]\r\n                            var avg = props.suburbavg[day][low]\r\n                            setavgData(avgData => [...avgData, avg]);\r\n                            setcasesAxis(casesAxis => [...casesAxis, day])\r\n                            setcasesData(casesData => [...casesData, cases]);\r\n                        }catch (e) {\r\n\r\n                        }\r\n                })\r\n\r\n            } catch (e) {\r\n\r\n            }\r\n\r\n            try {\r\n\r\n                var topic = props.suburbtopic[date][low]\r\n\r\n                console.log(\"date\"+date+\"wordddd\"+topic[0].word)\r\n\r\n                topic.map(\r\n                    (t,index) => {\r\n\r\n                        setbarAxis(barAxis => [...barAxis, t.word])\r\n                        setbarData(barData => [...barData, t.num])\r\n\r\n                    }\r\n                )\r\n            } catch (e) {\r\n\r\n            }\r\n\r\n\r\n            try {\r\n                var emotion = props.suburbemtion[date][low]\r\n\r\n                emotion.map(\r\n                    (t) => {\r\n                        setbar2Axis(bar2Axis => [...bar2Axis, t.emotion])\r\n                        setbar2Data(bar2Data => [...bar2Data, t.num])\r\n                    }\r\n                )\r\n            } catch (e) {\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n    const handleScaleChange = (event) => {\r\n        setScale(event.target.value)\r\n    };\r\n\r\n    const handleAreaChange = (event) => {\r\n        setArea(event.target.value)\r\n        upload(event.target.value, date)\r\n    };\r\n    const handleDateChange = (event) => {\r\n        setDate(event.target.value)\r\n        upload(area, event.target.value)\r\n    }\r\n\r\n    const timestamp = new Date('April 4 2020').getTime();\r\n    const ONE_DAY = 86400000;\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div style={{marginTop: '140px', marginLeft: '80px'}}>\r\n                <div style={{display: 'flex'}}>\r\n                    <div style={{width: '600px', height: '200px', marginRight: '200px'}}>\r\n                        <Line data={{\r\n                            labels: casesAxis, datasets: [{\r\n                                data: casesData, borderColor:'rgba(229, 115, 115, 1)',fill: false, label: 'cases', yAxisID: 'cases'\r\n                            },\r\n                                {\r\n                                    data: avgData, borderColor:'#b39ddb',fill: false, label: 'avg', yAxisID: 'emotion'\r\n                                }\r\n                                ]\r\n                            }}  onElementsClick={elems => {\r\n                            try {\r\n                                var activePoint = elems[0];\r\n                                var data = activePoint._chart.data;\r\n                                var datasetIndex = activePoint._datasetIndex;\r\n                                var labels = data.labels;\r\n                                var index = activePoint._index;\r\n                                setDate(labels[index])\r\n                                upload(area, labels[index])\r\n\r\n                            } catch (e) {\r\n\r\n                            }\r\n                        }}\r\n                              options={{\r\n\r\n                            scales: {\r\n                            yAxes: [{\r\n                                id: 'cases',\r\n                                type: 'linear',\r\n                                position: 'left',\r\n                                scaleLabel: {\r\n                                    display: false,\r\n                                    labelString: 'cases'\r\n                                }\r\n                            }, {\r\n                                id: 'emotion',\r\n                                type: 'linear',\r\n                                position: 'right',\r\n                                ticks: {\r\n                                    max: 1,\r\n                                    min: -1\r\n                                },\r\n                                scaleLabel: {\r\n                                    display: false,\r\n                                    labelString: 'emotion_avg'\r\n                                }\r\n\r\n                            }],\r\n                            xAxes: [{\r\n                                scaleLabel: {\r\n                                    display: true,\r\n                                    labelString: 'Date (M D)'\r\n                                }\r\n                            }]\r\n                        }}}/>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <FormControl>\r\n                            <InputLabel>Scale</InputLabel>\r\n                            <Select\r\n                                value={scale}\r\n                                onChange={handleScaleChange}>\r\n                                <MenuItem value={'suburb'}>suburb</MenuItem>\r\n                                <MenuItem value={'state'}>state</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                        <br/>\r\n                        <br/>\r\n                        <FormControl>\r\n                            <InputLabel>Area</InputLabel>\r\n                            <Select\r\n                                value={area}\r\n                                onChange={handleAreaChange}>\r\n                                {scale === 'state' &&\r\n                                stateName.map((key, i) =>\r\n                                    <MenuItem key={i} value={key}>{key}</MenuItem>)}\r\n\r\n                                {scale === 'suburb' &&\r\n                                suburbName.map((key, i) =>\r\n                                    <MenuItem key={i} value={key}>{key}</MenuItem>)}\r\n                            </Select>\r\n                        </FormControl>\r\n                        <br/>\r\n                        <br/>\r\n                        <FormControl >\r\n                            <InputLabel>Date</InputLabel>\r\n                            <Select\r\n                                value={date}\r\n                                onChange={handleDateChange}>\r\n                                {twitterDate.map(key =>\r\n                                    <MenuItem value={key}>{key}</MenuItem>)}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </div>\r\n                </div>\r\n                <div style={{display:'flex', marginTop: '120px'}}>\r\n                <div style={{width: '800px', height: '200px'}}>\r\n                    <Bar data={{\r\n                        labels: barAxis, datasets: [{\r\n                            data: barData, backgroundColor: '#b39ddb',fill: false, label: 'twitter topic',\r\n                        }]\r\n                    }} options={{\r\n\r\n                        scales: {\r\n                            yAxes: [{\r\n                                ticks: {\r\n                                    min: 0\r\n                                },\r\n                            }]\r\n\r\n                        }}}/>\r\n                </div>\r\n                    <div style={{width: '600px', height: '200px',marginLeft:'20px'}}>\r\n                        <Bar data={{\r\n                            labels: bar2Axis, datasets: [{\r\n                                data: bar2Data,backgroundColor: '#b39ddb', fill: false, label: 'twitter emotion',\r\n                            }]\r\n                        }}/>\r\n                    </div>\r\n                </div>\r\n                <br/>\r\n\r\n\r\n                {/*<div>\r\n                        <XYPlot\r\n                            width={1200}\r\n                            height={200}\r\n                            xType=\"ordinal\"\r\n                        >\r\n\r\n                            <LineSeries data={casesData} animation damping={9} stiffness={300} color=\"#ffcdd2\"/>\r\n                            <VerticalBarSeries data={topicData} animation damping={9} stiffness={300} color=\"blue\"/>\r\n                            <XAxis title={'Date'} tickLabelAngle={40}/>\r\n                            <YAxis title={'Cases'}/>\r\n                        </XYPlot>\r\n\r\n                        { !(casesData && casesData.length) && <Typography>Loading</Typography>}\r\n\r\n                    <div style={{marginTop:'60px'}}>\r\n                        <RadialChart\r\n                            data={Data}\r\n                            width={200}\r\n                            height={200} />\r\n                    </div>\r\n                    </div>*/}\r\n\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}